# TODO LIST

## BUG

1. å…ˆè®¨è®ºç›®æ ‡æ¨¡å—éœ€æ±‚ï¼šåŸºäºã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹æ„¿æ™¯ã€ä½œä¸ºæ¯ä¸ªè§’è‰²çš„æ„¿æ™¯ï¼Œç„¶åç»§ç»­å®ç°ç›®æ ‡ç®¡ç†çš„ UI å±‚ï¼ˆç›®æ ‡åˆ—è¡¨é¡µé¢ã€è¯¦æƒ…é¡µã€åˆ›å»º/ç¼–è¾‘è¡¨å•ï¼‰ã€‚
çµæ„Ÿæ¨¡å—ï¼šå‚è€ƒthings3çš„å›æ”¶ç®±ï¼Œéšæ—¶æ·»åŠ çµæ„Ÿåˆ°å›æ”¶ç®±
å°†ç›®æ ‡æ¨¡å—ã€çµæ„Ÿæ¨¡å—çš„å†…å®¹ï¼Œæˆ‘è§‰å¾—éƒ½åº”è¯¥æœ‰å…¥å£å¯ä»¥è½¬åŒ–ä¸ºä¹ æƒ¯
2. ä¹ æƒ¯è¿½è¸ªæ¨¡å—ï¼Œå°†ä¹ æƒ¯æ›¿ä»£ä½œä¸ºå•ç‹¬çš„tabï¼Œå› ä¸ºè¿™ç§ç±»å‹çš„ä¹ æƒ¯æ¯”è¾ƒé‡è¦

1. ç¼–è¾‘ä¹ æƒ¯æ—¶ï¼Œæ•°æ®æ²¡æœ‰å›æ˜¾
2. æ˜æ—¥è®¡åˆ’ä¸å…è®¸æ‰“å¡ï¼Œä½†æ˜¯å¯ä»¥ç‚¹å‡»checkboxå®Œæˆæš—ç¤ºè¡Œä¸º
3. ä¹ æƒ¯å¤šäº†ä¹‹ååˆ—è¡¨å¤ªé•¿ï¼Œä¸å¥½ç®¡ç†
4. æ˜æ—¥è®¡åˆ’çš„æé†’åŠŸèƒ½
5. æ–°å¢æˆ–ç¼–è¾‘ä¹ æƒ¯æ—¶ï¼Œä¸éœ€è¦æ ¡éªŒè¾“å…¥çš„æš—ç¤ºã€å¥–èµä¸ºç©º
6. å¯¹å¯¼å‡ºçš„ä¹ æƒ¯jsonæ•°æ®è¿›è¡Œåœ¨åˆ†æï¼Œçœ‹çœ‹å¦‚ä½•å¯¹ä¹ æƒ¯æ›´å¥½çš„ç®¡ç†ï¼Œç°åœ¨ä¹ æƒ¯å¤šäº†ï¼Œæ„Ÿè§‰æ‰¾ä¸åˆ°é‡ç‚¹

## å¯¼å‡ºåŠŸèƒ½

1. å¯¼å‡ºæ•°æ®æ”¯æŒå¤åˆ¶JSONåˆ°å‰ªåˆ‡æ¿ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ç²˜è´´åˆ°å…¶ä»–ç«¯çš„åº”ç”¨ä¸­

## æ•°æ®å‡†å¤‡

3. å‡†å¤‡å¥½ä¹ æƒ¯æ„Ÿæ‚ŸMDç¬”è®°
2. å‡†å¤‡å½•å…¥æ•°æ®

# wudao

A new Flutter project.

## Getting Started

This project is a starting point for a Flutter application.

A few resources to get you started if this is your first Flutter project:

- [Lab: Write your first Flutter app](https://docs.flutter.dev/get-started/codelab)
- [Cookbook: Useful Flutter samples](https://docs.flutter.dev/cookbook)

For help getting started with Flutter development, view the
[online documentation](https://docs.flutter.dev/), which offers tutorials,
samples, guidance on mobile development, and a full API reference.

# Claude ä½¿ç”¨

## TODO

1. æ–°é¡¹ç›®ä½¿ç”¨ Github SpecKit å¼€å‘æ–°é¡¹ç›®ï¼šæä¾›äº†æ€è€ƒçš„æ¡†æ¶ã€å®ç°è·¯å¾„ã€å¤§æ¨¡å‹é—´å…±äº«ã€å­˜æ¡£
2. å¤šAgent review ä»£ç ï¼ˆè®¾ç½®æ•™ç¨‹ï¼š<https://www.bilibili.com/video/BV1HEunzPEoS/?spm_id_from=333.1387.search.video_card.click&vd_source=3b187a9d475dded9d7ef4b4b129abe64ï¼‰>
      a. codex éœ€è¦å‡çº§ä¸ºPlusæ‰èƒ½ä½¿ç”¨ï¼ˆcodexç›®å‰çœ‹æ¥ä¼¼ä¹æ¯”claude 4.5ä¸ªç‹—è¡€ï¼‰
      b. gemini æœ‰å…è´¹é¢åº¦

## æŒ‡ä»¤

/rewind é€‰ä¸­å›æ»š

/usage æŸ¥çœ‹ç”¨é‡

/exit é€€å‡ºå½“å‰ä¼šè¯

tab åˆ‡æ¢æ€è€ƒæ¨¡å¼
ultrathink å¼€å¯ultrathinkæ¨¡å¼
æœç´¢å‘é€çš„å†å²æ¶ˆæ¯ Ctrl + R
æŸ¥çœ‹ todosï¼šCtrl + T
VSCodeæ’ä»¶

## è‡ªå®šä¹‰å‘½ä»¤

é¡¹ç›®çº§åˆ«ï¼š.claude/commands/xx.md è‡ªå®šä¹‰å‘½ä»¤çš„æ–‡æ¡£
å…¨å±€çº§åˆ«ï¼š~/.claude/commands/.md å…¨å±€è‡ªå®šä¹‰å‘½ä»¤çš„æ–‡æ¡£
æ”¾åœ¨ç›®å½•(æ›´å¥½çš„æ•´ç†è‡ªå®šä¹‰å‘½åï¼‰æ—¶å¦‚ä½•è®¿é—®ï¼šç›®å½•å:æ–‡æ¡£å.md

ARGUMENTS ä¼ é€’å‚æ•°
@ å¼•ç”¨æ–‡ä»¶ï¼Œåœ¨å“ªé‡Œä½¿ç”¨å‘½ä»¤ï¼Œå°±å¼•ç”¨å“ªä¸ªæ–‡ä»¶

## hooks

åˆ©ç”¨hookså®ç°claude codeè¾“å‡ºç­‰å¾…æç¤ºï¼ˆç­‰å¾…ç”¨æˆ·ç¡®è®¤ï¼‰æ—¶ï¼Œé€šè¿‡hookså‘é€é£ä¹¦æ¶ˆæ¯é€šçŸ¥ç”¨æˆ·

## MCPé…ç½®

claude --dangerously-skip-permissions
      --allowed-tools

claude mcp add-json github '{"command":"npx","args":["-y","@modelcontex
      tprotocol/server-github"],"env":{"GITHUB_PERSONAL_ACCESS_TOKEN":""}}'

claude mcp add-json dart '{"command":"fvm
      dart","args":["mcp-server","--force-roots-fallback"]}'
claude mcp get github
claude mcp list
å…¶ä»–å‘½ä»¤ï¼šclaude mcp remove dart
claude mcp remove dart -s user && claude mcp remove
      dart -s project 2>/dev/null || true

### dart MCPé…ç½®

â”‚ MCP Config locations (by scope):                                                                     â”‚
â”‚  â€¢ User config (available in all your projects):                                                     â”‚
â”‚    â€¢ /Users/pierai/.claude.json                                                                      â”‚
â”‚  â€¢ Project config (shared via .mcp.json):                                                            â”‚
â”‚    â€¢ /Users/pierai/Development/projects/flutter/wudao/.mcp.json (file does not exist)                â”‚
â”‚  â€¢ Local config (private to you in this project):                                                    â”‚
â”‚    â€¢ /Users/pierai/.claude.json [project: /Users/pierai/Development/projects/flutter/wudao]

Dart MCP server å·²æ·»åŠ ï¼Œä½†è¿æ¥å¤±è´¥ã€‚è¿™é€šå¸¸æ˜¯å› ä¸ºè¿˜æ²¡æœ‰å®‰è£… Dart MCP server åŒ…ã€‚éœ€è¦å…ˆæ¿€æ´»ï¼šfvm dart pub global activate mcp_server
æŸ¥çœ‹å…¨å±€åŒ…ï¼šfvm dart pub global list
"dart": {
      "command": "fvm dart",
      "args": [
        "mcp-server",
        "--flutter-sdk",
        "/Users/pierai/fvm/versions/3.35.5",
        "--force-roots-fallback"
      ]
    }

## Agenté…ç½®

### é¡¹ç›®çº§é…ç½®

/Users/pierai/Development/projects/flutter/wudao/
â”œâ”€â”€ .claude/                          # é¡¹ç›®çº§é…ç½®
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ flutter_architect.md      # é¡¹ç›®ç‰¹å®š agent
â”‚   â”‚   â”œâ”€â”€ go_backend.md
â”‚   â”‚   â””â”€â”€ integration_specialist.md
â”‚   â””â”€â”€ prompts/                      # å¯é€‰ï¼šé¡¹ç›®æç¤ºè¯
â””â”€â”€ ...å…¶ä»–é¡¹ç›®æ–‡ä»¶

### å…¨å±€é…ç½®ï¼ˆä¸åœ¨é¡¹ç›®ä¸­ï¼‰

~/Library/Application Support/Claude/
â””â”€â”€ claude_desktop_config.json        # MCP æœåŠ¡å™¨é…ç½®

# å¸¸ç”¨æŒ‡ä»¤

```bash
fvm flutter clean && fvm flutter pub get &&
fvm dart run build_runner build --delete-conflicting-outputs

fvm flutter pub upgrade --major-versions
fvm dart analyze xx.dart
# åˆå§‹åŒ–ä¹ æƒ¯
dart run scripts/init_habits.dart

# æ£€æŸ¥ç¯å¢ƒ
1. é‡å¯ Dart Analysis Serverï¼š
    - æŒ‰ Cmd+Shift+P
    - è¾“å…¥ "Dart: Restart Analysis Server"
    - æ‰§è¡Œ
2. æ£€æŸ¥ Flutter SDK æ˜¯å¦è¢«è¯†åˆ«ï¼š
    - æŒ‰ Cmd+Shift+P
    - è¾“å…¥ "Flutter: Run Flutter Doctor"
    - æŸ¥çœ‹è¾“å‡º
```

# è¿è¡Œåˆ° MacOS

## é¦–æ¬¡æ„å»ºæ­¥éª¤

```bash
# 1. è·å– Flutter ä¾èµ–
fvm flutter pub get

# 2. ç›´æ¥è¿è¡Œï¼ˆæ¨èï¼‰ï¼š -d æŒ‡å®šè®¾å¤‡ID
fvm flutter run -d macos

# æˆ–è€…å…ˆæ„å»ºå†è¿è¡Œ
fvm flutter build macos --debug
# ç„¶ååœ¨ Xcode ä¸­æ‰“å¼€ macos/Runner.xcworkspace è¿è¡Œ
```

**æ³¨æ„**ï¼š

- `fvm flutter run -d macos` ä¼šè‡ªåŠ¨æ‰§è¡Œæ„å»ºå¹¶ç”Ÿæˆå¿…è¦æ–‡ä»¶ï¼ˆå¦‚ xcfilelistï¼‰ï¼Œæ¨èä½¿ç”¨
- `fvm flutter build macos --debug` ä»…åœ¨éœ€è¦æ‰‹åŠ¨æ„å»ºæˆ–ä¿®å¤é…ç½®é—®é¢˜æ—¶ä½¿ç”¨
- CocoaPods çš„é…ç½®è­¦å‘Šå¯ä»¥å¿½ç•¥ï¼ˆå·²åœ¨ xcconfig ä¸­æ‰‹åŠ¨é…ç½®ï¼‰

## å¸¸è§é—®é¢˜

### é—®é¢˜ 1: pod install ä¸‹è½½è¶…æ—¶

```bash
# é…ç½® CocoaPods æº
pod repo remove trunk
pod repo add tuna https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git
# æ¸…ç©º Pods ç¼“å­˜
rm -f Podfile.lock
pod cache clean --all
rm -rf Pods
pod install --repo-update
```

### é—®é¢˜ 2: xcfilelist æ–‡ä»¶ç¼ºå¤±

```bash
# æ¸…ç†å¹¶é‡å»º
fvm flutter clean
fvm flutter pub get
fvm flutter run -d macos  # ä¼šè‡ªåŠ¨ç”Ÿæˆ
```

### é—®é¢˜ 3: sandbox ä¸åŒæ­¥é”™è¯¯

```bash
# å®Œæ•´æ¸…ç†é‡å»º
cd macos
rm -rf Pods Podfile.lock
cd ..
fvm flutter clean
fvm flutter pub get
fvm flutter run -d macos
```

### é—®é¢˜ 4: VS Code è°ƒè¯•æ—¶ VM Service æ— æ³•å¯åŠ¨

**é”™è¯¯ä¿¡æ¯**ï¼š

```
SocketException: Failed to create server socket (OS Error: Operation not permitted, errno = 1)
```

**åŸå› **ï¼šmacOS App Sandbox ç¼ºå°‘ç½‘ç»œæƒé™ï¼Œå¯¼è‡´ VM Service æ— æ³•ç›‘å¬ç«¯å£è¿›è¡Œè°ƒè¯•ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šåœ¨ entitlements æ–‡ä»¶ä¸­æ·»åŠ ç½‘ç»œæƒé™ï¼š

`macos/Runner/DebugProfile.entitlements`ï¼š

```xml
<key>com.apple.security.network.server</key>
<true/>
<key>com.apple.security.network.client</key>
<true/>
```

`macos/Runner/Release.entitlements`ï¼š

```xml
<key>com.apple.security.network.client</key>
<true/>
```

ä¿®æ”¹åæ‰§è¡Œï¼š

```bash
flutter clean
# ç„¶ååœ¨ VS Code ä¸­é‡æ–°è¿è¡Œè°ƒè¯•é…ç½®
```

**æ³¨æ„**ï¼š

- å‘½ä»¤è¡Œ `flutter run` ä¸å—å½±å“ï¼Œå› ä¸ºä½¿ç”¨äº†ä¸åŒçš„æƒé™é…ç½®
- VS Code ä¸­çš„ `.vscode/settings.json` éœ€è¦é…ç½®æ­£ç¡®çš„ Flutter SDK è·¯å¾„ï¼š

  ```json
  // âœ… æ¨èï¼šä½¿ç”¨ FVM ç¬¦å·é“¾æ¥ï¼ˆè·¨è®¾å¤‡å…¼å®¹ï¼‰
  "dart.flutterSdkPath": ".fvm/flutter_sdk"

  // âŒ é¿å…ï¼šVS Code Dart æ‰©å±•å¯èƒ½æ— æ³•è¯†åˆ«
  // "dart.flutterSdkPath": ".fvm/versions/3.35.5"

  // âš ï¸ å¤‡é€‰ï¼šç»å¯¹è·¯å¾„ï¼ˆä¸æ¨èï¼Œä¸è·¨è®¾å¤‡ï¼‰
  // "dart.flutterSdkPath": "/Users/pierai/Development/projects/flutter/wudao/.fvm/versions/3.35.5"
  ```

## é¢„ç¼“å­˜èµ„æº

```bash
# ä¸‹è½½ iOS/macOS å¹³å°ç¼–è¯‘å·¥å…·
fvm flutter precache --ios

```

# é¡¹ç›®æ–‡æ¡£

ğŸ“‚ æ–‡æ¡£ç»“æ„ç°åœ¨æ›´æ¸…æ™°

  docs/
  â”œâ”€â”€ habit/
  â”‚   â”œâ”€â”€ README_HABITS.md           # ğŸ“š æ–‡æ¡£å¯¼èˆªä¸­å¿ƒ
  â”‚   â”œâ”€â”€ HABIT_QUICK_START.md       # âš¡ å¿«é€Ÿå¼€å§‹
  â”‚   â””â”€â”€ DAILY_PLAN_USER_GUIDE.md   # âœ¨ æ¬¡æ—¥è®¡åˆ’ç”¨æˆ·æŒ‡å—ï¼ˆæ–°å¢ï¼‰
  â”œâ”€â”€ habit_module_requirements.md   # ğŸ“‹ å®Œæ•´éœ€æ±‚æ–‡æ¡£
  â””â”€â”€ requirements.md                # ğŸ“Š é¡¹ç›®æ€»ä½“éœ€æ±‚
